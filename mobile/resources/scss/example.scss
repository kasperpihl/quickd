/******************************************************************
VARIABLES
******************************************************************/
$base-gradient: matte;
$list-pressed-color: mix(#08679F, #fff, 10);
$list-active-color: mix(#043F62, #fff, 0);
$img-path: '../images/';
$ff: 'Helvetica Neue', sans-serif;

/******************************************************************
IMPORTS
******************************************************************/
@import 'sencha-touch/default/all';
@import '_reset';
@import '_mixins';
@import '_helpers';

// @include sencha-panel;
// @include sencha-buttons;
@include sencha-toolbar;
// @include sencha-list;
// @include sencha-layout;
// @include sencha-form;
// @include sencha-loading-spinner;

/******************************************************************
BUTTONS
******************************************************************/
@include sencha-button-ui('sencha', #2E9A3E, glossy);

/******************************************************************
GENERAL STYLES
******************************************************************/
#ext-mainview-1 { background: transparent; }

/******************************************************************
TOOLBAR STYLES
******************************************************************/
@include sencha-toolbar-ui('sencha', rgba(black, 0.7), glossy);
.x-toolbar-sencha .x-title { text-shadow: 0 1px 0 rgba(0,0,0,.8); }

#quickd-topbar {
    @include background-image(
        // Color stops are defined from top to bottom..
        linear-gradient(#ddd 0%, #868686 2%, #3c3c3c 49%, #2f2f2f 50%, #252525 100%)
    );

    .x-toolbar-inner {

    }
}

/******************************************************************
DEALS LIST
******************************************************************/

#quickd-deals {
    background: url($img-path + 'bg-pattern.png');

    .x-scroll-view {  }
    .x-scroll-container {  }
    .x-list { background: transparent; }
    .x-list .x-list-item .x-list-item-label { padding: 0; overflow: hidden; } /* list item wrapping element */

    .x-list-item {
        margin: 10px 7px;
        background: white;
        @include border-radius(3px);

        // Shadow
        &:after {
            $url: $img-path + 'shadow.png';
            $w: 100%;
            $h: 14px;
            display: block;
            position: absolute;
            bottom: 0 - $h;
            
            width: $w;  height: $h;
            background: url($url);
            background-size: 100% $h;

            content: '';
        }

        .x-list-item-label {
            border: none;
            padding: 0;
        }
    }


    article[id*=deal_] {
        position: relative;

        img.deal_image { margin-left: 5px; }

        .deal-content { 
            margin-left: 84px;
            padding-top: 7px;

            h1 {
                width: 85%;
                font: bold 15px/16px $ff;
                color: #333;
                @include text-overflow(ellipsis);
            }

            h2, > footer {
                font: normal italic 13px/16px $ff;
                color: #a5a5a5;
            }

            h2 { margin-top: 3px; }

            > footer {
                font-style: italic;
                margin-top: 8px;
                font-size: 11px;

                .price, time {
                    position: relative;
                    padding-left: 17px;

                    &:not(:first-child) { margin-left: 12px };

                    &:before {
                        position: absolute;
                        top: 1px; left: 0;
                        display: block;
                        width: 12px; height: 12px;
                        background: url($img-path + 'spritemap.png');
                        content: '';
                    }
                }

                .price:before { background-position-x: 0; }

                time:before { background-position-x: -23px; }

                .awesome-badge {
                    position: absolute;
                    top: -3px; right: -3px;

                    $url: $img-path + 'spritemap.png';
                    width: 54px; height: 48px;
                    background: url($url) no-repeat -1px -64px;

                    .value {
                        display: block;
                        margin: 12px 0 0 24px;
                        font: bold 12px/1 'Helvetica Neue', sans-serif;
                        text-shadow: 0 1px 0 rgba(white, 0.45), 0 0 7px rgba(#fef0a9, 0.33);
                        text-transform: uppercase;
                        letter-spacing: 1px;
                        color: #292929;


                        @include transform(rotate(45deg));
                    }
                }
            }
        }
        
        &:not(.awesome) footer .awesome-badge { display: none; }

        // Category color code
        &:before {
        	display: block;
        	position: absolute;
            top: 0; left: 0;
            width: 5px;
            height: 100%;
            
            @include border-radius(3px 0 0 3px);
            
            content: '';
        }

        &.category.fooddrink {
            $color: #c09159;

            footer { color: $color; }
            footer .price:before { background-position-y: -22px; }
            footer time:before { background-position-y: -23px; }
            &:before { background: $color; }
        }
        
        &.category.shopping {
            $color: #a25d7a;
            
            footer { color: $color; }
            footer .price:before { background-position-y: -44px; }
            footer time:before { background-position-y: -45px; }
            &:before { background: $color; }
        }
        
        &.category.experience {
            $color: #5da2a0;
            
            footer { color: $color; }
            footer .price:before { background-position-y: 0; }
            footer time:before { background-position-y: -1px; }
            &:before { background: $color; }
        }
    }
}